Задание 1
Что нужно сделать

Подключите сервис order-service к Eureka (система обнаружения сервисов). Для этого сделайте изменения в проекте, который находится в папке /05_Microservice_Organization/order-service.

Выполните следующие шаги:

— добавьте в файл pom.xml необходимую зависимость (eureka-client);

—  добавьте настройки для подключения к Eureka в файл bootstrap.yml, который находится в src/main/resources/bootstrap.yml;

—  добавьте аннотации типа @Enable… в класс src/main/java/ru/skillbox/orderservice/OrderServiceApplication.java для активации подключения к серверу Eureka.



Входные данные:

Адрес сервера Eureka: http://localhost:8888/eureka/



Критерии оценки

Зачёт — приложение запустилось и зарегистрировалось в Eureka. Можно проверить успешность регистрации, отправив запрос с помощью Postman: GET http://localhost:8888/eureka/apps/ORDER-SERVICE/. Ответ должен быть «200 и json», c описанием сервиса.



Задание 2
Что нужно сделать

Подключите сервис order-service к серверу конфигурации. Для этого сделайте изменения в проекте, который находится в папке /05_Microservice_Organization/order-service.

Выполните следующие шаги:

— добавьте в файл pom.xml необходимую зависимость (Spring Cloud Config);

—  добавьте настройки для подключения к серверу конфигураций в файл bootstrap.yml, который находится в src/main/resources/bootstrap.yml;

—  удалите файл application.yml, который находится по адресу src/main/resources/application.yml.



Важные условия:

Подключайтесь к серверу конфигурации через систему обнаружения сервисов.

Service-id сервера конфигурации discovery, то есть service-id: discovery.



Критерии оценки

Зачёт — приложение успешно запустилось, при этом файл application.yml отсутствует.



Задание 3
Что нужно сделать

Настройте перенаправление запросов с API Gateway в сервис заказов (order-service). Файл настроек лежит в /05_Microservice_Organization/discovery/config/gateway-local.yml.



Важные условия:

— сделайте перенаправление через балансировку и поиск сервисов, адрес lb://order-service;

—  получите верный путь, который будет доступен пользователям: /skillbox/api/order/**;

—  добавьте фильтр RewritePath с параметрами /skillbox(?<segment>/?.*), $\{segment}.



Критерии оценки

Зачёт — приложение успешно запустилось. С помощью Postman выполняется запрос GET http://localhost:9090/skillbox/api/order/, в ответ приходит статус «200» и пустой массив [].



Запуск сервисов из домашнего задания
Для того, чтобы запустить все сервисы и проверить работу, сделайте:

1. Запуск docker контейнеров.

Это действие необходимо сделать один раз после перезагрузки компьютера или обновления приложения docker.

В корневом каталоге вашего репозитория есть файл /05_Microservice_Organization/docker-compose.yml.

Для запуска необходимо набрать в консоли docker-compose up -d



2. Запуск сервиса внешних настроек и обнаружения сервисов.

Этот сервис необходимо перезапускать после каждого изменения в его коде или настройках.

Откройте проект в IntelliJ IDEA из папки /05_Microservice_Organization/discovery.

Перейдите в класс src/main/java/ru/skillbox/discovery/DiscoveryApplication.java

В исходном коде класса напротив имени класса нужно нажать иконку зеленого треугольника, показанную на картинке.

Повторное нажатие этой иконки приводит к перезапуску приложения.

![img.png](img.png)


3. Запуск API шлюза.

Этот сервис необходимо перезапускать после каждого изменения в его коде или настройках.

Откройте проект в IntelliJ IDEA из папки /05_Microservice_Organization/gateway.

Перейдите в класс src/main/java/ru/skillbox/gateway/GatewayApplication.java

В исходном коде класса напротив имени класса нужно нажать иконку зеленого треугольника, показанную на картинке.

Повторное нажатие данной иконки приводит к перезапуску приложения.

![img_1.png](img_1.png)


4. Запуск сервиса заказов.

Этот сервис необходимо перезапускать после каждого изменения в его коде или настройках.

Откройте проект в IntelliJ IDEA из папки /05_Microservice_Organization/order-service.

Перейдите в класс src/main/java/ru/skillbox/orderservice/OrderServiceApplication.java

В исходном коде класса напротив имени класса нужно нажать иконку зеленого треугольника, показанную на картинке.

Повторное нажатие данной иконки приводит к перезапуску приложения.

![img_2.png](img_2.png)
